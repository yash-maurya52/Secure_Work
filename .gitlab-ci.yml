stages:
  - security_scan

semgrep_security_scan:
  stage: security_scan
  tags:
    - semgrep  # must match the tag you used when registering the runner
  script:
    - echo "üîç Starting Semgrep scan for OWASP Top 10 and common security issues..."
    - semgrep --config "p/owasp-top-ten" --config "p/security-audit" --config "p/cwe-top-25" --error
  only:
    - branches
  except:
    - tags
