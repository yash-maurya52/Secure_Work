stages:
  - scan

semgrep_security_scan:
  stage: scan
  tags:
    - semgrep-runner  # This must match your runner tag in config.toml
  script:
    - echo "🔍 Running Semgrep..."
    - semgrep --config "p/owasp-top-ten" --error
  retry:
    max: 2
    when: runner_system_failure